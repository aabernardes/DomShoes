import { qs, showToast, createElement, formatCurrency, on } from '../modules/utils.js'; import { getProducts } from '../modules/api.js'; import { createProductCard } from './product-card.js'; document.addEventListener('DOMContentLoaded', async () => { const productGrid = qs('#product-grid'); const loadingIndicator = qs('#loading-indicator'); if (!productGrid || !loadingIndicator) { console.error('One or more main elements not found (productGrid, loadingIndicator).'); return showToast('Erro ao carregar a p√°gina de produtos.', 'error'); } if (loadingIndicator) loadingIndicator.style.display = 'block'; try { const products = await getProducts({ featured: true }); if (loadingIndicator) loadingIndicator.style.display = 'none'; displayProducts(products, productGrid); } catch (error) { if (loadingIndicator) loadingIndicator.style.display = 'none'; console.error('Error fetching featured products:', error); showToast('Erro ao carregar produtos.', 'error'); } }); function displayProducts(products, productGrid) { if (!productGrid) { console.error('Product grid not found.'); return; } if (products.length === 0) { productGrid.innerHTML = '<p>Nenhum produto encontrado.</p>'; return; } productGrid.innerHTML = ''; products.forEach(product => { const productCard = createProductCard(product); if (productCard) { productGrid.appendChild(productCard); } }); }

